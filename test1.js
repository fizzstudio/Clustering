var csv2json = require('csvjson-csv2json');
var data = csv2json(s2Data);
var Plotly = require('plotly.js-dist')



/*

var data1 = [{x:1,y:0}, {x:.707,y:.707}, {x:0,y:1}, {x:-.707,y:.707}, {x:-1,y:0},{x:-.707,y:-.707}, {x:0,y:-1}, {x:.707,y:-.707}];
var data2 = [{x:0,y:0}, {x:1,y:1}, {x:2,y:2}, {x:-3,y:3}, {x:4,y:4},{x:5,y:5}, {x:6,y:6}, {x:7,y:7}]
console.log(shoelace(data1));
console.log(shoelace(data2));

*/
var data = coordinate([
    [
        "225786",
        "529417"
    ],
    [
        "221233",
        "538472"
    ],
    [
        "210499",
        "526471"
    ],
    [
        "223408",
        "520131"
    ],
    [
        "232047",
        "522748"
    ],
    [
        "211266",
        "534538"
    ],
    [
        "223226",
        "546198"
    ],
    [
        "202913",
        "525966"
    ],
    [
        "201907",
        "516078"
    ],
    [
        "241485",
        "523039"
    ],
    [
        "197367",
        "535989"
    ],
    [
        "198823",
        "538624"
    ],
    [
        "192564",
        "547558"
    ],
    [
        "193275",
        "538687"
    ],
    [
        "182854",
        "534283"
    ],
    [
        "184412",
        "537050"
    ],
    [
        "198294",
        "552987"
    ],
    [
        "185935",
        "554627"
    ],
    [
        "179830",
        "547383"
    ],
    [
        "183026",
        "545377"
    ],
    [
        "179834",
        "541387"
    ],
    [
        "184402",
        "546549"
    ],
    [
        "193502",
        "557364"
    ],
    [
        "179189",
        "536028"
    ],
    [
        "179931",
        "536588"
    ],
    [
        "176092",
        "531921"
    ],
    [
        "188992",
        "563992"
    ],
    [
        "176278",
        "550602"
    ],
    [
        "177665",
        "557923"
    ],
    [
        "165104",
        "543395"
    ],
    [
        "170816",
        "547069"
    ],
    [
        "164453",
        "544085"
    ],
    [
        "201753",
        "569116"
    ],
    [
        "166290",
        "521714"
    ],
    [
        "177246",
        "571940"
    ],
    [
        "197849",
        "575524"
    ],
    [
        "180633",
        "570302"
    ],
    [
        "166840",
        "562425"
    ],
    [
        "167716",
        "562762"
    ],
    [
        "166560",
        "559687"
    ],
    [
        "170494",
        "560892"
    ],
    [
        "172882",
        "571145"
    ],
    [
        "163477",
        "561507"
    ],
    [
        "149906",
        "546909"
    ],
    [
        "158366",
        "537970"
    ],
    [
        "151374",
        "538387"
    ],
    [
        "155430",
        "549012"
    ],
    [
        "161154",
        "538355"
    ],
    [
        "154268",
        "542573"
    ],
    [
        "155274",
        "552551"
    ],
    [
        "150404",
        "539885"
    ],
    [
        "154964",
        "554923"
    ],
    [
        "154162",
        "536416"
    ],
    [
        "201324",
        "574588"
    ],
    [
        "206561",
        "574789"
    ],
    [
        "206660",
        "575002"
    ],
    [
        "203667",
        "577260"
    ],
    [
        "151099",
        "518008"
    ],
    [
        "158060",
        "525533"
    ],
    [
        "172116",
        "513383"
    ],
    [
        "173847",
        "514665"
    ],
    [
        "165382",
        "518876"
    ],
    [
        "176602",
        "574552"
    ],
    [
        "179240",
        "577011"
    ],
    [
        "182840",
        "584262"
    ],
    [
        "171471",
        "576787"
    ],
    [
        "179224",
        "584189"
    ],
    [
        "166597",
        "572855"
    ],
    [
        "165356",
        "570715"
    ],
    [
        "169322",
        "577938"
    ],
    [
        "163925",
        "576666"
    ],
    [
        "155899",
        "561715"
    ],
    [
        "157138",
        "565993"
    ],
    [
        "153185",
        "562792"
    ],
    [
        "152658",
        "569277"
    ],
    [
        "152584",
        "564548"
    ],
    [
        "159271",
        "568953"
    ],
    [
        "158283",
        "570550"
    ],
    [
        "158596",
        "562634"
    ],
    [
        "156474",
        "570384"
    ],
    [
        "153326",
        "558408"
    ],
    [
        "149758",
        "564768"
    ],
    [
        "149054",
        "556986"
    ],
    [
        "141238",
        "557986"
    ],
    [
        "137451",
        "555339"
    ],
    [
        "135336",
        "552552"
    ],
    [
        "139212",
        "557713"
    ],
    [
        "140989",
        "537156"
    ],
    [
        "138449",
        "555969"
    ],
    [
        "139460",
        "557260"
    ],
    [
        "148385",
        "538149"
    ],
    [
        "142668",
        "544976"
    ],
    [
        "145251",
        "553486"
    ],
    [
        "142265",
        "546135"
    ],
    [
        "144242",
        "557674"
    ],
    [
        "135849",
        "550612"
    ],
    [
        "143265",
        "548387"
    ],
    [
        "138073",
        "556272"
    ],
    [
        "138199",
        "541774"
    ],
    [
        "138122",
        "557230"
    ],
    [
        "142886",
        "556511"
    ],
    [
        "138965",
        "558201"
    ],
    [
        "136078",
        "547418"
    ],
    [
        "141641",
        "557376"
    ],
    [
        "136580",
        "553967"
    ],
    [
        "140717",
        "554093"
    ],
    [
        "143879",
        "536650"
    ],
    [
        "138734",
        "557713"
    ],
    [
        "144325",
        "538991"
    ],
    [
        "141718",
        "549576"
    ],
    [
        "140706",
        "547367"
    ],
    [
        "142663",
        "556520"
    ],
    [
        "144856",
        "551807"
    ],
    [
        "148080",
        "544056"
    ],
    [
        "140047",
        "540043"
    ],
    [
        "139434",
        "557410"
    ],
    [
        "141991",
        "539522"
    ],
    [
        "142000",
        "554964"
    ],
    [
        "139847",
        "552015"
    ],
    [
        "147664",
        "559632"
    ],
    [
        "139641",
        "557503"
    ],
    [
        "146678",
        "558942"
    ],
    [
        "139451",
        "549580"
    ],
    [
        "142767",
        "538646"
    ],
    [
        "145244",
        "561042"
    ],
    [
        "134422",
        "544300"
    ],
    [
        "141771",
        "551655"
    ],
    [
        "141924",
        "558399"
    ],
    [
        "143363",
        "551365"
    ],
    [
        "142563",
        "560090"
    ],
    [
        "137680",
        "555667"
    ],
    [
        "137699",
        "556769"
    ],
    [
        "142516",
        "559062"
    ],
    [
        "138349",
        "554238"
    ],
    [
        "139237",
        "548782"
    ],
    [
        "147663",
        "555514"
    ],
    [
        "147885",
        "527813"
    ],
    [
        "152331",
        "529689"
    ],
    [
        "140164",
        "531093"
    ],
    [
        "141699",
        "530028"
    ],
    [
        "138525",
        "534268"
    ],
    [
        "138884",
        "529162"
    ],
    [
        "146681",
        "562995"
    ],
    [
        "146924",
        "565933"
    ],
    [
        "145758",
        "562414"
    ],
    [
        "144401",
        "565666"
    ],
    [
        "207218",
        "589497"
    ],
    [
        "210597",
        "589836"
    ],
    [
        "221994",
        "575146"
    ],
    [
        "147599",
        "513563"
    ],
    [
        "140962",
        "518168"
    ],
    [
        "143226",
        "522375"
    ],
    [
        "137172",
        "523482"
    ],
    [
        "142575",
        "517378"
    ],
    [
        "173576",
        "507309"
    ],
    [
        "166904",
        "503121"
    ],
    [
        "178005",
        "594957"
    ],
    [
        "155943",
        "576199"
    ],
    [
        "161475",
        "587507"
    ],
    [
        "162713",
        "586568"
    ],
    [
        "151701",
        "574146"
    ],
    [
        "154620",
        "576738"
    ],
    [
        "158773",
        "588778"
    ],
    [
        "148510",
        "579793"
    ],
    [
        "149760",
        "577278"
    ],
    [
        "144570",
        "573936"
    ],
    [
        "144620",
        "575370"
    ],
    [
        "146120",
        "576624"
    ],
    [
        "139146",
        "569516"
    ],
    [
        "137787",
        "566189"
    ],
    [
        "139474",
        "569485"
    ],
    [
        "139636",
        "565984"
    ],
    [
        "139911",
        "561185"
    ],
    [
        "141222",
        "572556"
    ],
    [
        "138220",
        "560056"
    ],
    [
        "138461",
        "558771"
    ],
    [
        "136967",
        "565662"
    ],
    [
        "137316",
        "562151"
    ],
    [
        "138012",
        "558263"
    ],
    [
        "136531",
        "557658"
    ],
    [
        "136606",
        "562296"
    ],
    [
        "136301",
        "569544"
    ],
    [
        "137516",
        "556818"
    ],
    [
        "136418",
        "562926"
    ],
    [
        "137197",
        "556522"
    ],
    [
        "136059",
        "558213"
    ],
    [
        "134449",
        "557556"
    ],
    [
        "135284",
        "555664"
    ],
    [
        "132705",
        "557674"
    ],
    [
        "130440",
        "562623"
    ],
    [
        "131523",
        "568207"
    ],
    [
        "129550",
        "560106"
    ],
    [
        "130883",
        "557824"
    ],
    [
        "130657",
        "555545"
    ],
    [
        "133094",
        "557996"
    ],
    [
        "130201",
        "562734"
    ],
    [
        "129997",
        "568115"
    ],
    [
        "131109",
        "568012"
    ],
    [
        "130582",
        "565948"
    ],
    [
        "131874",
        "552586"
    ],
    [
        "127373",
        "549518"
    ],
    [
        "128788",
        "546091"
    ],
    [
        "125548",
        "552424"
    ],
    [
        "127964",
        "538935"
    ],
    [
        "134725",
        "537440"
    ],
    [
        "133780",
        "533275"
    ],
    [
        "131532",
        "536658"
    ],
    [
        "136569",
        "532130"
    ],
    [
        "125005",
        "540340"
    ],
    [
        "119496",
        "543146"
    ],
    [
        "127202",
        "525948"
    ],
    [
        "125351",
        "529954"
    ],
    [
        "134261",
        "519275"
    ],
    [
        "136232",
        "576477"
    ],
    [
        "133023",
        "574572"
    ],
    [
        "202547",
        "601240"
    ],
    [
        "220156",
        "589643"
    ],
    [
        "206219",
        "604081"
    ],
    [
        "211584",
        "591058"
    ],
    [
        "220224",
        "592068"
    ],
    [
        "156003",
        "502860"
    ],
    [
        "125840",
        "520239"
    ],
    [
        "162124",
        "500069"
    ],
    [
        "160280",
        "493497"
    ],
    [
        "148319",
        "584541"
    ],
    [
        "139903",
        "592241"
    ],
    [
        "139978",
        "587153"
    ],
    [
        "130249",
        "579307"
    ],
    [
        "130157",
        "581286"
    ],
    [
        "128669",
        "574591"
    ],
    [
        "122296",
        "566921"
    ],
    [
        "122130",
        "568886"
    ],
    [
        "121786",
        "564225"
    ],
    [
        "125756",
        "579609"
    ],
    [
        "120357",
        "560737"
    ],
    [
        "118391",
        "553625"
    ],
    [
        "119535",
        "551857"
    ],
    [
        "115905",
        "560139"
    ],
    [
        "117212",
        "565692"
    ],
    [
        "117089",
        "561455"
    ],
    [
        "116860",
        "550810"
    ],
    [
        "116142",
        "550919"
    ],
    [
        "112379",
        "547679"
    ],
    [
        "113099",
        "546732"
    ],
    [
        "117959",
        "536156"
    ],
    [
        "114108",
        "540537"
    ],
    [
        "110948",
        "539533"
    ],
    [
        "111174",
        "539350"
    ],
    [
        "111855",
        "531542"
    ],
    [
        "109317",
        "531425"
    ],
    [
        "112184",
        "530469"
    ],
    [
        "107965",
        "535173"
    ],
    [
        "104489",
        "542515"
    ],
    [
        "123905",
        "508486"
    ],
    [
        "129030",
        "588495"
    ],
    [
        "118137",
        "579149"
    ],
    [
        "233105",
        "591646"
    ],
    [
        "112673",
        "516997"
    ],
    [
        "116492",
        "509399"
    ],
    [
        "139033",
        "593287"
    ],
    [
        "143912",
        "595772"
    ],
    [
        "127940",
        "590467"
    ],
    [
        "143592",
        "606949"
    ],
    [
        "132497",
        "593125"
    ],
    [
        "123441",
        "594415"
    ],
    [
        "119237",
        "591137"
    ],
    [
        "113259",
        "568684"
    ],
    [
        "109912",
        "565003"
    ],
    [
        "110877",
        "562558"
    ],
    [
        "103192",
        "550021"
    ],
    [
        "105945",
        "528795"
    ],
    [
        "107160",
        "530936"
    ],
    [
        "108512",
        "525986"
    ],
    [
        "102460",
        "533057"
    ],
    [
        "101722",
        "535117"
    ],
    [
        "108651",
        "521409"
    ],
    [
        "99569",
        "523174"
    ],
    [
        "101553",
        "517715"
    ],
    [
        "94571",
        "528963"
    ],
    [
        "95899",
        "530846"
    ],
    [
        "94458",
        "533883"
    ],
    [
        "121650",
        "599844"
    ],
    [
        "115781",
        "594942"
    ],
    [
        "105568",
        "584102"
    ],
    [
        "139052",
        "610320"
    ],
    [
        "156430",
        "615117"
    ],
    [
        "137740",
        "618961"
    ],
    [
        "137657",
        "611252"
    ],
    [
        "146183",
        "622188"
    ],
    [
        "114311",
        "601605"
    ],
    [
        "115287",
        "602637"
    ],
    [
        "113321",
        "606322"
    ],
    [
        "110479",
        "594587"
    ],
    [
        "107972",
        "601191"
    ],
    [
        "105193",
        "596017"
    ],
    [
        "105353",
        "589239"
    ],
    [
        "97216",
        "564094"
    ],
    [
        "95074",
        "570002"
    ],
    [
        "93459",
        "514032"
    ],
    [
        "95071",
        "503965"
    ],
    [
        "127858",
        "609681"
    ],
    [
        "103153",
        "601002"
    ],
    [
        "102898",
        "592834"
    ],
    [
        "94933",
        "588147"
    ],
    [
        "94061",
        "576129"
    ],
    [
        "98675",
        "580608"
    ],
    [
        "98525",
        "579761"
    ],
    [
        "137347",
        "622867"
    ],
    [
        "127503",
        "623654"
    ],
    [
        "104862",
        "608089"
    ],
    [
        "119386",
        "620549"
    ],
    [
        "101427",
        "615890"
    ],
    [
        "97430",
        "598804"
    ],
    [
        "95749",
        "602775"
    ],
    [
        "94249",
        "600812"
    ],
    [
        "86243",
        "559135"
    ],
    [
        "88703",
        "577217"
    ],
    [
        "80673",
        "566893"
    ],
    [
        "93136",
        "613387"
    ],
    [
        "84501",
        "604671"
    ],
    [
        "87236",
        "607429"
    ],
    [
        "79285",
        "554817"
    ],
    [
        "68388",
        "574380"
    ],
    [
        "69565",
        "599820"
    ],
    [
        "67867",
        "545392"
    ]
])
function euclidDistance(p, q) {
  //Returns euclidean distance between vectors p and q.
  var sum = 0;
  var i = Math.min(p.length, q.length);

  while (i--) {
    sum += (p[i] - q[i]) * (p[i] - q[i]);
  }

  return Math.sqrt(sum);
};
function coordinate(array){
  var dataArray = [];
  for (let i = 0; i < array.length; i++) {
    dataArray.push({x : array[i][0], y : array[i][1]})
  }
  return dataArray;
}
function shoelace(data){
  let sum = 0;
  let n = data.length;
  for (let i = 0; i < n - 1; i++){
      sum += data[i].x * data[i + 1].y - data[i].y * data[i + 1].x
  }
  sum += data[n - 1].x * data[0].y - data[n - 1].y * data[0].x
  return Math.abs(sum/2);
}

function perimeter(data){
  let sum = 0;
  let n = data.length;
  if (n == 2){
    return euclidDistance([data[0].x, data[0].y], [data[1].x, data[1].y])
  }
  for (let i = 0; i < n - 1; i++){
    let pointer = [data[i].x, data[i].y];
    let next = [data[i + 1].x, data[i + 1].y];
    sum += euclidDistance(pointer, next);
  }
  sum += euclidDistance([data[n-1].x, data[n-1].y], [data[0].x, data[0].y])
  return sum;
}

function flatness(data){
  return 2*Math.sqrt(shoelace(data)*Math.PI)/perimeter(data);
}
let y = [];
let x = [];

for (let point of data){
    x.push(point.x);
    y.push(point.y);
}

TESTER2 = document.getElementById('tester2');
var trace1 = [{
    x: x,
    y: y,
    mode: 'markers',    
    type: 'scatter'
  }];

Plotly.newPlot(TESTER2, trace1)

console.log(perimeter(data));
console.log(shoelace(data));
console.log(flatness(convexhull.makeHull(data)));
