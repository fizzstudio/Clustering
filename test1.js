var csv2json = require('csvjson-csv2json');
var data = csv2json(s2Data);
var Plotly = require('plotly.js-dist')



/*

var data1 = [{x:1,y:0}, {x:.707,y:.707}, {x:0,y:1}, {x:-.707,y:.707}, {x:-1,y:0},{x:-.707,y:-.707}, {x:0,y:-1}, {x:.707,y:-.707}];
var data2 = [{x:0,y:0}, {x:1,y:1}, {x:2,y:2}, {x:-3,y:3}, {x:4,y:4},{x:5,y:5}, {x:6,y:6}, {x:7,y:7}]
console.log(shoelace(data1));
console.log(shoelace(data2));

*/
var data = coordinate([
    [
        "801539",
        "318482"
    ],
    [
        "801667",
        "318542"
    ],
    [
        "800479",
        "321640"
    ],
    [
        "797105",
        "316002"
    ],
    [
        "797205",
        "313318"
    ],
    [
        "801323",
        "316240"
    ],
    [
        "806131",
        "312752"
    ],
    [
        "801910",
        "325434"
    ],
    [
        "803603",
        "327255"
    ],
    [
        "800865",
        "312968"
    ],
    [
        "802237",
        "318526"
    ],
    [
        "803959",
        "315173"
    ],
    [
        "800123",
        "312312"
    ],
    [
        "797242",
        "324588"
    ],
    [
        "801551",
        "320544"
    ],
    [
        "809182",
        "319115"
    ],
    [
        "801931",
        "317202"
    ],
    [
        "801093",
        "317509"
    ],
    [
        "798523",
        "324500"
    ],
    [
        "805237",
        "318655"
    ],
    [
        "803375",
        "311620"
    ],
    [
        "801441",
        "323812"
    ],
    [
        "797313",
        "317527"
    ],
    [
        "804630",
        "332333"
    ],
    [
        "808710",
        "330379"
    ],
    [
        "802111",
        "320817"
    ],
    [
        "796375",
        "309563"
    ],
    [
        "800565",
        "319364"
    ],
    [
        "802089",
        "313456"
    ],
    [
        "796609",
        "319691"
    ],
    [
        "803464",
        "329093"
    ],
    [
        "802646",
        "317894"
    ],
    [
        "809550",
        "327365"
    ],
    [
        "795322",
        "311178"
    ],
    [
        "800041",
        "318331"
    ],
    [
        "802814",
        "320130"
    ],
    [
        "802738",
        "312234"
    ],
    [
        "803386",
        "318982"
    ],
    [
        "798904",
        "324420"
    ],
    [
        "800447",
        "331643"
    ],
    [
        "804251",
        "329956"
    ],
    [
        "803448",
        "314797"
    ],
    [
        "795527",
        "315510"
    ],
    [
        "794640",
        "313497"
    ],
    [
        "795299",
        "312036"
    ],
    [
        "808686",
        "332209"
    ],
    [
        "799275",
        "324108"
    ],
    [
        "798472",
        "322218"
    ],
    [
        "800483",
        "320713"
    ],
    [
        "797162",
        "306135"
    ],
    [
        "800272",
        "316170"
    ],
    [
        "806827",
        "324616"
    ],
    [
        "802853",
        "314938"
    ],
    [
        "800804",
        "316615"
    ],
    [
        "801588",
        "319814"
    ],
    [
        "797400",
        "315778"
    ],
    [
        "801055",
        "321833"
    ],
    [
        "804038",
        "306622"
    ],
    [
        "802784",
        "313853"
    ],
    [
        "797415",
        "319840"
    ],
    [
        "800772",
        "325023"
    ],
    [
        "806626",
        "318966"
    ],
    [
        "800845",
        "311838"
    ],
    [
        "797272",
        "324228"
    ],
    [
        "807409",
        "325526"
    ],
    [
        "798321",
        "319665"
    ],
    [
        "805372",
        "313397"
    ],
    [
        "790738",
        "308028"
    ],
    [
        "800667",
        "315995"
    ],
    [
        "795205",
        "316433"
    ],
    [
        "808452",
        "320117"
    ],
    [
        "797569",
        "321799"
    ],
    [
        "801751",
        "318110"
    ],
    [
        "807401",
        "314610"
    ],
    [
        "800677",
        "310656"
    ],
    [
        "795571",
        "310093"
    ],
    [
        "811913",
        "325091"
    ],
    [
        "806982",
        "316680"
    ],
    [
        "800133",
        "327081"
    ],
    [
        "806511",
        "313841"
    ],
    [
        "803796",
        "314893"
    ],
    [
        "802012",
        "318315"
    ],
    [
        "804354",
        "309671"
    ],
    [
        "807017",
        "330432"
    ],
    [
        "805390",
        "319676"
    ],
    [
        "803277",
        "319525"
    ],
    [
        "801609",
        "320399"
    ],
    [
        "805080",
        "323708"
    ],
    [
        "801080",
        "318049"
    ],
    [
        "799724",
        "318884"
    ],
    [
        "798059",
        "316113"
    ],
    [
        "806176",
        "320301"
    ],
    [
        "801386",
        "313545"
    ],
    [
        "804871",
        "317801"
    ],
    [
        "801997",
        "319385"
    ],
    [
        "810253",
        "323873"
    ],
    [
        "794826",
        "309589"
    ],
    [
        "794142",
        "306704"
    ],
    [
        "802041",
        "319504"
    ],
    [
        "804190",
        "320706"
    ],
    [
        "798983",
        "325682"
    ],
    [
        "799912",
        "323363"
    ],
    [
        "804119",
        "328544"
    ],
    [
        "804358",
        "320802"
    ],
    [
        "803057",
        "331037"
    ],
    [
        "803031",
        "325811"
    ],
    [
        "800444",
        "311497"
    ],
    [
        "802004",
        "317772"
    ],
    [
        "803470",
        "319069"
    ],
    [
        "803332",
        "315488"
    ],
    [
        "800037",
        "317963"
    ],
    [
        "800694",
        "316789"
    ],
    [
        "800316",
        "311699"
    ],
    [
        "806848",
        "320541"
    ],
    [
        "805462",
        "317833"
    ],
    [
        "798308",
        "312788"
    ],
    [
        "802655",
        "316263"
    ],
    [
        "801456",
        "320080"
    ],
    [
        "801309",
        "318213"
    ],
    [
        "804013",
        "316083"
    ],
    [
        "808489",
        "317021"
    ],
    [
        "804332",
        "319006"
    ],
    [
        "794956",
        "309980"
    ],
    [
        "801232",
        "307078"
    ],
    [
        "794615",
        "305632"
    ],
    [
        "801301",
        "316893"
    ],
    [
        "803370",
        "318247"
    ],
    [
        "804702",
        "315881"
    ],
    [
        "800959",
        "322309"
    ],
    [
        "803405",
        "317316"
    ],
    [
        "802254",
        "320673"
    ],
    [
        "798633",
        "317300"
    ],
    [
        "801482",
        "327644"
    ],
    [
        "798612",
        "326404"
    ],
    [
        "802537",
        "312497"
    ],
    [
        "799794",
        "315080"
    ],
    [
        "793892",
        "313943"
    ],
    [
        "804691",
        "332987"
    ],
    [
        "796952",
        "318633"
    ],
    [
        "800655",
        "320227"
    ],
    [
        "801780",
        "318992"
    ],
    [
        "805977",
        "320805"
    ],
    [
        "796916",
        "323332"
    ],
    [
        "808405",
        "318841"
    ],
    [
        "798981",
        "311092"
    ],
    [
        "797178",
        "310439"
    ],
    [
        "800582",
        "316980"
    ],
    [
        "803839",
        "310353"
    ],
    [
        "796283",
        "315582"
    ],
    [
        "801145",
        "317601"
    ],
    [
        "801662",
        "318423"
    ],
    [
        "801782",
        "318281"
    ],
    [
        "803377",
        "319212"
    ],
    [
        "803932",
        "318781"
    ],
    [
        "801586",
        "318947"
    ],
    [
        "804251",
        "331304"
    ],
    [
        "799667",
        "316830"
    ],
    [
        "799021",
        "326404"
    ],
    [
        "793684",
        "312065"
    ],
    [
        "806320",
        "315242"
    ],
    [
        "801903",
        "312794"
    ],
    [
        "803627",
        "319323"
    ],
    [
        "794667",
        "315069"
    ],
    [
        "799291",
        "317500"
    ],
    [
        "798243",
        "324160"
    ],
    [
        "801326",
        "315779"
    ],
    [
        "808644",
        "326320"
    ],
    [
        "800966",
        "317165"
    ],
    [
        "802431",
        "322048"
    ],
    [
        "803701",
        "321815"
    ],
    [
        "800235",
        "316652"
    ],
    [
        "807421",
        "317527"
    ],
    [
        "797947",
        "319734"
    ],
    [
        "805035",
        "317469"
    ],
    [
        "801166",
        "322298"
    ],
    [
        "801493",
        "322249"
    ],
    [
        "806087",
        "326636"
    ],
    [
        "810657",
        "329468"
    ],
    [
        "800390",
        "309948"
    ],
    [
        "801634",
        "318965"
    ],
    [
        "799197",
        "314215"
    ],
    [
        "807696",
        "320548"
    ],
    [
        "800461",
        "326821"
    ],
    [
        "801174",
        "320442"
    ],
    [
        "809781",
        "326904"
    ],
    [
        "804429",
        "312164"
    ],
    [
        "801183",
        "316191"
    ],
    [
        "813645",
        "328765"
    ],
    [
        "802482",
        "335269"
    ],
    [
        "803780",
        "334441"
    ],
    [
        "803774",
        "334756"
    ],
    [
        "810903",
        "332925"
    ],
    [
        "804979",
        "334141"
    ],
    [
        "812965",
        "330224"
    ],
    [
        "789833",
        "304422"
    ],
    [
        "797787",
        "301470"
    ],
    [
        "797594",
        "302109"
    ],
    [
        "790932",
        "305223"
    ],
    [
        "800394",
        "301473"
    ],
    [
        "790774",
        "303642"
    ],
    [
        "799001",
        "302014"
    ],
    [
        "797111",
        "302781"
    ],
    [
        "788220",
        "301915"
    ],
    [
        "790395",
        "300024"
    ],
    [
        "791983",
        "298565"
    ],
    [
        "793855",
        "298525"
    ],
    [
        "801313",
        "300606"
    ],
    [
        "814045",
        "332998"
    ],
    [
        "808062",
        "337340"
    ],
    [
        "808717",
        "335740"
    ],
    [
        "814317",
        "333112"
    ],
    [
        "811277",
        "335577"
    ],
    [
        "813791",
        "334609"
    ],
    [
        "806192",
        "337849"
    ],
    [
        "804408",
        "337683"
    ],
    [
        "810502",
        "336169"
    ],
    [
        "811061",
        "333595"
    ],
    [
        "807446",
        "342555"
    ],
    [
        "814158",
        "335578"
    ],
    [
        "810543",
        "341180"
    ],
    [
        "797834",
        "297329"
    ],
    [
        "814401",
        "341234"
    ],
    [
        "809594",
        "344872"
    ],
    [
        "811391",
        "343836"
    ],
    [
        "807293",
        "347456"
    ],
    [
        "817119",
        "336333"
    ],
    [
        "809054",
        "345541"
    ],
    [
        "814108",
        "344096"
    ],
    [
        "814280",
        "344223"
    ],
    [
        "809552",
        "342258"
    ],
    [
        "809259",
        "345634"
    ],
    [
        "787644",
        "297715"
    ],
    [
        "795254",
        "296488"
    ],
    [
        "812869",
        "346251"
    ],
    [
        "795836",
        "291870"
    ],
    [
        "797009",
        "293194"
    ],
    [
        "794991",
        "291216"
    ],
    [
        "788005",
        "292268"
    ],
    [
        "786245",
        "292352"
    ],
    [
        "817410",
        "346944"
    ],
    [
        "795489",
        "287279"
    ],
    [
        "783491",
        "288029"
    ],
    [
        "789583",
        "287700"
    ],
    [
        "783110",
        "289805"
    ],
    [
        "784164",
        "285702"
    ],
    [
        "793560",
        "285392"
    ],
    [
        "819768",
        "346596"
    ],
    [
        "817135",
        "349925"
    ],
    [
        "816145",
        "349032"
    ],
    [
        "818119",
        "348676"
    ],
    [
        "814605",
        "354382"
    ],
    [
        "816852",
        "352965"
    ],
    [
        "813173",
        "354777"
    ],
    [
        "820258",
        "351165"
    ],
    [
        "811502",
        "355939"
    ],
    [
        "820327",
        "352701"
    ],
    [
        "820904",
        "351763"
    ],
    [
        "813436",
        "360446"
    ],
    [
        "780927",
        "285057"
    ],
    [
        "784151",
        "283760"
    ],
    [
        "786719",
        "283364"
    ],
    [
        "779897",
        "279572"
    ],
    [
        "778965",
        "282290"
    ],
    [
        "779437",
        "281959"
    ],
    [
        "782506",
        "279930"
    ],
    [
        "782642",
        "275308"
    ],
    [
        "775604",
        "274485"
    ],
    [
        "779956",
        "271501"
    ],
    [
        "824212",
        "363776"
    ],
    [
        "821151",
        "366545"
    ],
    [
        "824822",
        "367091"
    ],
    [
        "826585",
        "366934"
    ],
    [
        "823913",
        "369439"
    ],
    [
        "823840",
        "368410"
    ],
    [
        "818622",
        "370753"
    ],
    [
        "786635",
        "269352"
    ],
    [
        "786234",
        "267976"
    ],
    [
        "783116",
        "265635"
    ],
    [
        "783666",
        "262902"
    ],
    [
        "778414",
        "260729"
    ],
    [
        "769386",
        "259892"
    ],
    [
        "830658",
        "368694"
    ],
    [
        "826228",
        "376658"
    ],
    [
        "826789",
        "377676"
    ],
    [
        "825716",
        "373098"
    ],
    [
        "832651",
        "373469"
    ],
    [
        "829529",
        "375007"
    ],
    [
        "830805",
        "370801"
    ],
    [
        "826048",
        "374236"
    ],
    [
        "824624",
        "381716"
    ],
    [
        "833182",
        "379714"
    ],
    [
        "769876",
        "257669"
    ],
    [
        "777978",
        "252419"
    ],
    [
        "773023",
        "251826"
    ],
    [
        "776131",
        "248465"
    ],
    [
        "764997",
        "249477"
    ],
    [
        "765283",
        "249459"
    ],
    [
        "834173",
        "386159"
    ],
    [
        "833661",
        "389733"
    ],
    [
        "830450",
        "393096"
    ],
    [
        "770113",
        "241615"
    ],
    [
        "773955",
        "239849"
    ],
    [
        "765502",
        "240340"
    ],
    [
        "841928",
        "398948"
    ],
    [
        "838276",
        "395673"
    ],
    [
        "840886",
        "397888"
    ],
    [
        "840462",
        "402858"
    ],
    [
        "838129",
        "404012"
    ],
    [
        "759789",
        "229116"
    ]
])
function euclidDistance(p, q) {
  //Returns euclidean distance between vectors p and q.
  var sum = 0;
  var i = Math.min(p.length, q.length);

  while (i--) {
    sum += (p[i] - q[i]) * (p[i] - q[i]);
  }

  return Math.sqrt(sum);
};
function coordinate(array){
  var dataArray = [];
  for (let i = 0; i < array.length; i++) {
    dataArray.push({x : array[i][0], y : array[i][1]})
  }
  return dataArray;
}
function shoelace(data){
  let sum = 0;
  let n = data.length;
  for (let i = 0; i < n - 1; i++){
      sum += data[i].x * data[i + 1].y - data[i].y * data[i + 1].x
  }
  sum += data[n - 1].x * data[0].y - data[n - 1].y * data[0].x
  return Math.abs(sum/2);
}

function perimeter(data){
  let sum = 0;
  let n = data.length;
  if (n == 2){
    return euclidDistance([data[0].x, data[0].y], [data[1].x, data[1].y])
  }
  for (let i = 0; i < n - 1; i++){
    let pointer = [data[i].x, data[i].y];
    let next = [data[i + 1].x, data[i + 1].y];
    sum += euclidDistance(pointer, next);
  }
  sum += euclidDistance([data[n-1].x, data[n-1].y], [data[0].x, data[0].y])
  return sum;
}

function flatness(data){
  return 2*Math.sqrt(shoelace(data)*Math.PI)/perimeter(data);
}
let y = [];
let x = [];

for (let point of data){
    x.push(point.x);
    y.push(point.y);
}

TESTER2 = document.getElementById('tester2');
var trace1 = [{
    x: x,
    y: y,
    mode: 'markers',    
    type: 'scatter'
  }];

Plotly.newPlot(TESTER2, trace1)

console.log(perimeter(data));
console.log(shoelace(data));
console.log(flatness(data));
